<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="zh_cn">
<head>
<meta charset="utf-8">
<meta name="description" content="TO BE A BETTER MAN">
<meta name="viewport" content="width=device-width">
<title>BetterSemut | BetterSemut</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<link rel="canonical" href="https://semutter.github.io/">
<!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]-->
</head>
<body>
    <section class="social"><ul>
<li><a href="#" title="Home"><i class="icon-home"></i></a></li>
            <li><a href="archive.html" title="Archives"><i class="icon-folder-open-alt"></i></a></li>
            <li><a href="categories/index.html" title="Tags"><i class="icon-tags"></i></a></li>
            <li><a href="rss.xml" title="RSS"><i class="icon-rss"></i></a></li>
            <li><a href="https://github.com/semutter" title="My Github"><i class="icon-github"></i></a></li>

        </ul></section><section class="page-content"><div class="content" rel="main">
            
        <div class="post">
            <h1 class="title"><a href="posts/nikola-blog/">nikola搭建blog</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2017-11-15T20:08:28+08:00">2017-11-15 20:08</time>
</div>
                <div class="stats">
                    

                </div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        标签 : 
           <li><a class="tag p-category" href="categories/blog/" rel="tag">blog</a></li>
           <li><a class="tag p-category" href="categories/emacs/" rel="tag">emacs</a></li>
           <li><a class="tag p-category" href="categories/nikola/" rel="tag">nikola</a></li>
           <li><a class="tag p-category" href="categories/org-mode/" rel="tag">org-mode</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">启动设置</h2>
<div class="outline-text-2" id="text-1">
<p>
参考<a href="https://streakycobra.github.io/posts/blogging-in-org-mode-with-nikola/">网友博客</a>进行搭建，必要时可以到<a href="https://getnikola.com/">nikola官网</a>上进行查询，看内容比较详尽
</p>
</div>
<div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1">github.io的设置</h3>
<div class="outline-text-3" id="text-1-1">
<p>
自行创建对应github账号的username.github.io的仓库，并拉至本地
</p>
</div>
</div>
<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2">nikola安装</h3>
<div class="outline-text-3" id="text-1-2">
<div class="highlight"><pre><span></span>pip install "Nikola[extras]"
</pre></div>
</div>
</div>
<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3">nikola新建blog</h3>
<div class="outline-text-3" id="text-1-3">
<div class="highlight"><pre><span></span>nikola init my_first_site
mv my_first_site/* .
rm -r my_first_site
</pre></div>
<p>
按照命令行给出的指示进行配置相应的内容
</p>
</div>
</div>
<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4">nikola的org-mode支持</h3>
<div class="outline-text-3" id="text-1-4">
<p>
需要emacs对应的org-mode版本大于8.0
</p>
<div class="highlight"><pre><span></span>nikola plugin -i orgmode
</pre></div>
<p>
并在conf.py文件中增加相应的orgmode配置如下
</p>
<div class="highlight"><pre><span></span><span class="c1"># Add the orgmode compiler to your COMPILERS dict.</span>
<span class="n">COMPILERS</span><span class="p">[</span><span class="s2">"orgmode"</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="s1">'.org'</span><span class="p">,)</span>


<span class="c1"># Add org files to your POSTS, PAGES</span>
<span class="n">POSTS</span> <span class="o">=</span> <span class="n">POSTS</span> <span class="o">+</span> <span class="p">((</span><span class="s2">"posts/*.org"</span><span class="p">,</span> <span class="s2">"posts"</span><span class="p">,</span> <span class="s2">"post.tmpl"</span><span class="p">),)</span>
<span class="n">PAGES</span> <span class="o">=</span> <span class="n">PAGES</span> <span class="o">+</span> <span class="p">((</span><span class="s2">"stories/*.org"</span><span class="p">,</span> <span class="s2">"stories"</span><span class="p">,</span> <span class="s2">"story.tmpl"</span><span class="p">),)</span>
</pre></div>
</div>
</div>
<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5">测试系统是否work</h3>
<div class="outline-text-3" id="text-1-5">
<div class="highlight"><pre><span></span>nikola build
nikola serve
nikola auto # 自动检测变动生成页面
</pre></div>
</div>
</div>
<div id="outline-container-sec-1-6" class="outline-3">
<h3 id="sec-1-6">安装主题</h3>
<div class="outline-text-3" id="text-1-6">
<div class="highlight"><pre><span></span>nikola theme -i zen
</pre></div>
<p>
并配置conf.py
</p>
<div class="highlight"><pre><span></span><span class="n">theme</span> <span class="o">=</span> <span class="s2">"zen"</span>
</pre></div>
<p>
有更进阶更好看的主题配置方式，如boostrap，后续想美化的时候再进行处理
</p>
</div>
</div>
<div id="outline-container-sec-1-7" class="outline-3">
<h3 id="sec-1-7">配置github自动部署</h3>
<div class="outline-text-3" id="text-1-7">
<p>
conf.py中添加如下内容
</p>
<div class="highlight"><pre><span></span><span class="n">GITHUB_SOURCE_BRANCH</span> <span class="o">=</span> <span class="s1">'source'</span>
<span class="n">GITHUB_DEPLOY_BRANCH</span> <span class="o">=</span> <span class="s1">'master'</span>
</pre></div>
<p>
自动部署的语句
</p>
<div class="highlight"><pre><span></span>nikola github_deploy
</pre></div>
</div>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">日常使用</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1">新建blog</h3>
<div class="outline-text-3" id="text-2-1">
<div class="highlight"><pre><span></span>nikola new_post -e -f orgmode
</pre></div>
<p>
日常编辑还是在emacs中进行操作
</p>
</div>
</div>
<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2">部署到github</h3>
<div class="outline-text-3" id="text-2-2">
<div class="highlight"><pre><span></span>nikola github_deploy
</pre></div>
</div>
</div>
<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3">更改内容出错时</h3>
<div class="outline-text-3" id="text-2-3">
<p>
更改内容，如post文件名时，或者主题的配置时，可能显示会有问题，执行下述clean命令
</p>
<div class="highlight"><pre><span></span>nikola clean
</pre></div>
<p>
post改名时，清空之前生成的静态页面内容，不然会有部分内容会出粗
</p>
<div class="highlight"><pre><span></span>rm -rf output cache
</pre></div>
</div>
</div>
</div>
            </div>
        </div>
    

    

    
    



             
        <footer id="footer"><p>Contents © 2017         <a href="mailto:bettersemut@gmail.com">Semut</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         </p>
            
        </footer>
</div>
    </section><script src="assets/js/all-nocdn.js" type="text/javascript"></script><script type="text/javascript">
            $(function(){
                $('.timeago').timeago();
            });
        </script>
</body>
</html>
